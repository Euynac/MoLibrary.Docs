# 待办事项

## 模型验证
[ASP.NET Core MVC 中的模型验证 | Microsoft Learn](https://learn.microsoft.com/zh-cn/aspnet/core/mvc/models/validation?view=aspnetcore-8.0)




## 测试

测试属性用户，此账号下所有操作犹如开启Debug模式，可看到错误堆栈等。
生产模式下，不会展示堆栈，但提供`traceId`


## 模块功能

### 运行时动态改变某个模块日志等级用于调试指定模块下功能


## 模块UI

### 自定义路由
ui 注册时，可以自定义路由，自定义路由实现是加入到路由字典，当 key 存在时，替换为 page 指定路径，page 路径根据静态字段维护，注册时可以获取对应映射关系

默认 page 路径规则改变为：
`/module/modulename/ui/feature name`

方案1：重定向中间件（推荐）

```cs
  // 创建路由重定向中间件
  public class UIRouteRedirectMiddleware(RequestDelegate next, IUIRouteConfigurationProvider routeProvider)
  {
      public async Task InvokeAsync(HttpContext context)
      {
          var path = context.Request.Path.Value;

          // 检查是否有路由映射
          foreach (var config in routeProvider.GetAllConfigurations())
          {
              if (path == config.CustomRoute)
              {
                  // 重定向到实际的组件路由
                  context.Request.Path = config.DefaultRoute;
                  break;
              }
          }

          await next(context);
      }
  }

```





修复路由问题：由于调整Configuration依赖Controller导致Controller模块提前初始化，导致后续执行的路由未能成功注册
增加这种检测机制？如果依赖的模块未能成功调用DependsOn说明有问题。



## Chart

目前，我们项目用K8S部署，但是还是分别用yaml文件管理的我们业务微服务，非常混乱，我们需要统一管理，因此考虑采用Helm Chart的方式去统一管理所有服务。

请你根据我们目前的yaml文件生成chart管理文件。我们需求是可以自定义appid。


但我们对Helm Chart十分不熟悉，所以你除了要写详细的注释外，还需要完成详细的介绍文档，以及使用文档。






配置UI模块中的配置状态的界面需要重新设计。当前配置状态的数据结构我讲解一下：
配置是有层级关系的，不管是通过DashboardUI获取的还是ClientUI获取的配置列表，均是`List<DtoDomainConfigs>`。基于领域驱动设计，将微服务按子域分组，分组后的是DtoDomainConfigs，每个组有多个微服务的相关配置，也就是DtoServiceConfigs。微服务内可以有多个配置类，也就是DtoConfig。配置类中可以有多个配置项，也就是DtoOptionItem的信息

我们可以用三列整体布局来展示，第一列使用Navigation Menu，展示List<DtoDomainConfigs>以及其次一层的也就是DtoServiceConfigs，然后第二列使用Table去展示DtoConfig，第三列也使用Table去展示DtoOptionItem。



配置UI模块中的调试视图界面和配置提供者界面点击时就应该直接展示，而不是点击刷新按钮加载。另外配置提供者界面内容要重新优化，它的返回值是

UI模块的侧边导航栏 d:\Euynac\Programming\.NET\Euynac\MoLibrary\MoLibrary.UI\Components\Layout  需要优化一下，删去折叠/展开按钮，换成鼠标移动到窄侧边栏      

    时变成宽侧边栏。另外展开的侧边栏效果不优雅，现在展开的动画期间会导致文字挤压到一列，直接溢出很多文字，很难看，需要过渡动画自然点，不要导致文字溢出。      