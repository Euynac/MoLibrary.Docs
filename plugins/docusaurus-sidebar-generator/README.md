# Docusaurus Sidebar Generator

这个工具提供了一个自定义的侧边栏生成器，专门用于替换 Docusaurus 的默认 `sidebarItemsGenerator`，以实现以下功能：

- 使用文件名作为文档标签（而非文档内的标题）
- 使用文件夹名称作为侧边栏分类标签
- 自定义格式化文件名和文件夹名的显示

## 主要特点

- **轻量级**：仅提供一个生成器函数，无需注册为插件
- **灵活**：可以通过多个选项精细控制生成行为
- **无侵入性**：不影响 Docusaurus 的其他功能
- **易扩展**：易于根据需求修改和扩展

## 安装方法

这不是一个 npm 包，而是一个本地模块。将 `docusaurus-sidebar-generator` 文件夹放在项目的 `plugins` 目录下即可。

## 使用方法

在 `docusaurus.config.js` 中，直接在 docs 配置中使用这个生成器：

```js
// docusaurus.config.js
const createSidebarItemsGenerator = require('./plugins/docusaurus-sidebar-generator');

module.exports = {
  // ... 其他配置
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        docs: {
          sidebarPath: './sidebars.js',
          // 使用自定义的侧边栏生成器
          sidebarItemsGenerator: createSidebarItemsGenerator({
            // 使用文件名作为文档标签
            useFileNameAsLabel: true,
            // 使用文件夹名作为分类标签
            useFolderNameAsCategory: true,
            // 自定义标签转换函数
            transformLabel: (name) => {
              return name
                .replace(/([A-Z])/g, ' $1') // 在大写字母前添加空格
                .replace(/^./, (str) => str.toUpperCase()) // 首字母大写
                .trim();
            },
          }),
        },
        // ... 其他配置
      },
    ],
  ],
  // ... 其他配置
};
```

## 配置选项

| 选项 | 类型 | 默认值 | 描述 |
| --- | --- | --- | --- |
| `useFileNameAsLabel` | `boolean` | `true` | 是否使用文件名作为文档标签，而非文档内的标题 |
| `useFolderNameAsCategory` | `boolean` | `true` | 是否使用文件夹名作为分类标签 |
| `transformLabel` | `function` | `(name) => name` | 自定义转换文件名和文件夹名为显示标签的函数 |
| `transformCategoryLabelOnly` | `boolean` | `false` | 是否只转换分类标签，不转换文档标签 |

## 标签转换示例

以下是一些自定义 `transformLabel` 函数的示例：

### 驼峰命名转空格分隔的标题

```js
transformLabel: (name) => {
  return name
    .replace(/([A-Z])/g, ' $1') // 在大写字母前添加空格
    .replace(/^./, (str) => str.toUpperCase()) // 首字母大写
    .trim();
}
```

### 下划线/连字符转空格

```js
transformLabel: (name) => {
  return name
    .replace(/[_-]/g, ' ') // 将下划线和连字符替换为空格
    .replace(/\w\S*/g, (txt) => txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase()); // 每个单词首字母大写
}
```

## 特殊处理

- 对于 `index.md` 文件，生成器会使用其父文件夹名称作为标签
- 通过 `transformCategoryLabelOnly` 选项可以选择只格式化分类标签，保持文档标签为原始文件名

## 注意事项

- 确保 `sidebars.js` 文件使用了 `autogenerated` 类型来启用自动生成功能
- 此生成器最适合文件名和文件夹名具有好的语义的项目
- 与 Docusaurus 的 `numberPrefixParser` 等特性完全兼容

## 支持的 Docusaurus 版本

- Docusaurus v3.x 